implements nested list using templates.
